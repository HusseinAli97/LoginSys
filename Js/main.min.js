const emailInput=document.getElementById("email"),passwordInput=document.getElementById("password"),signUpNameInput=document.getElementById("signUpName"),signUpEmailInput=document.getElementById("signUpEmail"),signUpPasswordInput=document.getElementById("signUpPassword"),signInForm=document.getElementById("signInForm"),signUpForm=document.getElementById("signUpForm"),signUpBtn=document.getElementById("signUp"),signUpFormBtn=document.getElementById("signUpFormBtn"),container=document.querySelector(".mainSection"),backToSignIn=document.getElementById("backToSignIn"),loginMainForm=document.getElementById("loginMainForm"),localStorageKey="accountList";let accList=[];
//! 0 - up and down transition methods
//! 1 - check if local storage is empty
//!         - if empty make  account list empty and show sign up and if not empty make account list equal to local storage and show sign in
//!                 -in sign up validate data and add to local storage      -in sign in validate data and check if account is in local storage account list
//!         - make set local storage function
//! 2- run time check on sign up or sign in
//! 3- validate data and add to local storage
//! 4- if account is in local storage account list and clicked in sign in move to another page
//! 5- in sign up after pass validation move to sign in
function showSignIn(){signUpForm.classList.remove("moveUpSignUp"),signInForm.classList.remove("moveDownSignIn"),signUpForm.classList.replace("delay-1","transition-Delay"),signUpBtn.classList.remove("d-none"),backToSignIn.classList.add("d-none"),clearInput()}function showSignUp(){signInForm.classList.add("moveDownSignIn"),signUpForm.classList.add("moveUpSignUp"),signUpForm.classList.replace("transition-Delay","delay-1"),signUpBtn.classList.add("d-none"),backToSignIn.classList.remove("d-none"),clearInput()}function setupLocalStorage(n){localStorage.setItem(localStorageKey,JSON.stringify(n))}function setupEmail(n){localStorage.setItem("isLoggedInEmail",n)}function validName(){const n=signUpNameInput.value.trim();return n?/^[A-Z][a-zA-Z]{3,}$/g.test(n)?accList.some((s=>s.name===n))?(showAlert("This name is already taken. Please choose a different one."),signUpNameInput.classList.add("is-invalid"),!1):(signUpNameInput.classList.contains("is-invalid")?signUpNameInput.classList.remove("is-invalid"):signUpNameInput.classList.add("is-valid"),!0):(showAlert("Invalid name format. Name must start with an uppercase letter and be at least 4 characters long."),signUpNameInput.classList.add("is-invalid"),!1):(showAlert("Name field cannot be empty."),signUpNameInput.classList.add("is-invalid"),!1)}function validEmail(){const n=signUpEmailInput.value.trim();return n?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)?accList.some((s=>s.email===n))?(showAlert("This email is already registered. Please use a different email."),signUpEmailInput.classList.add("is-invalid"),!1):(signUpEmailInput.classList.contains("is-invalid")?signUpEmailInput.classList.remove("is-invalid"):signUpEmailInput.classList.add("is-valid"),!0):(showAlert("Invalid email format. Please enter a valid email address."),signUpEmailInput.classList.add("is-invalid"),!1):(showAlert("Email field cannot be empty."),signUpEmailInput.classList.add("is-invalid"),!1)}function validPassword(){const n=document.getElementById("wrongValues");return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm.test(signUpPasswordInput.value)&&""!==signUpPasswordInput.value?(signUpPasswordInput.classList.replace("is-invalid","is-valid"),n.classList.replace("d-block","d-none"),!0):(signUpPasswordInput.classList.add("is-invalid"),n.classList.replace("d-none","d-block"),n.classList.add("animate"),!1)}function validForm(){return validName()&&validEmail()&&validPassword()&&isUniqueName()&&isUniqueEmail()}function handleSignUpFormSubmission(){validForm()&&(accList.push({name:signUpNameInput.value,email:signUpEmailInput.value,password:signUpPasswordInput.value}),setupLocalStorage(accList),showSignIn(),clearInput(),showAlert("Successfully signed up!","success"))}function isUniqueName(){const n=signUpNameInput.value;return!accList.some((s=>s.name===n))}function isUniqueEmail(){const n=signUpEmailInput.value;return!accList.some((s=>s.email===n))}function clearInput(){signUpNameInput.value="",signUpEmailInput.value="",signUpPasswordInput.value="",emailInput.value="",passwordInput.value="",signUpNameInput.classList.remove("is-valid"),signUpEmailInput.classList.remove("is-valid"),signUpPasswordInput.classList.remove("is-valid"),signUpNameInput.classList.remove("is-invalid"),signUpEmailInput.classList.remove("is-invalid"),signUpPasswordInput.classList.remove("is-invalid"),wrongValues.classList.replace("d-block","d-none")}function showAlert(n,s="error"){Swal.fire({icon:s,text:n,position:"bottom",showConfirmButton:!1,timer:3e3,toast:!0})}function showSuccess(n){Swal.fire({icon:"success",title:n,showConfirmButton:!1,timer:1500})}function showLoadingScreen(){document.getElementById("loadingScreen").classList.replace("d-none","d-flex"),setTimeout((function(){window.location.href="../CRUD/index.html"}),3e3)}function validateSignIn(n,s){const i=accList.find((s=>s.email===n));return i?i.password!==s?(showAlert("Incorrect password. Please check your password."),passwordInput.classList.add("is-invalid"),!1):(clearInput(),emailInput.classList.remove("is-invalid"),passwordInput.classList.remove("is-invalid"),!0):(showAlert("Email not found. Please check your email."),emailInput.classList.add("is-invalid"),!1)}signUpBtn.addEventListener("click",(function(){showSignUp()})),backToSignIn.addEventListener("click",(function(){showSignIn()})),signUpNameInput.addEventListener("focusout",(function(){validName()})),signUpEmailInput.addEventListener("focusout",(function(){validEmail()})),signUpPasswordInput.addEventListener("keyup",(function(){validPassword()})),null!==localStorage.getItem(localStorageKey)?(accList=JSON.parse(localStorage.getItem(localStorageKey)),showSignIn()):showSignUp(),null!==localStorage.getItem("isLoggedInEmail")&&showLoadingScreen(),signUpFormBtn.addEventListener("click",handleSignUpFormSubmission),loginMainForm.addEventListener("submit",(function(n){n.preventDefault();const s=emailInput.value.trim();validateSignIn(s,passwordInput.value)&&(showAlert("Successfully signed in!","success"),setupEmail(s),container.classList.add("invisible"),showLoadingScreen())}));